$ python3 app/main.py 
2025-06-19 20:24:33,493 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-06-19 20:24:33,493 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-06-19 20:24:33,496 INFO sqlalchemy.engine.Engine select current_schema()
2025-06-19 20:24:33,496 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-06-19 20:24:33,498 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-06-19 20:24:33,498 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-06-19 20:24:33,499 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:24:33,500 INFO sqlalchemy.engine.Engine SELECT 1
2025-06-19 20:24:33,500 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ()
2025-06-19 20:24:33,501 INFO sqlalchemy.engine.Engine ROLLBACK
2025-06-19 20:24:42,991 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:24:43,118 INFO sqlalchemy.engine.Engine SELECT sgpos.payment_methods.id, sgpos.payment_methods.company_id, sgpos.payment_methods.name, sgpos.payment_methods.type, sgpos.payment_methods.is_active, sgpos.payment_methods.created_at, sgpos.payment_methods.updated_at 
FROM sgpos.payment_methods 
WHERE sgpos.payment_methods.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-19 20:24:43,118 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-19 20:24:43,167 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:24:43,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:24:43,176 INFO sqlalchemy.engine.Engine SELECT sgpos.companies.id, sgpos.companies.name, sgpos.companies.registration_number, sgpos.companies.gst_registration_number, sgpos.companies.address, sgpos.companies.phone, sgpos.companies.email, sgpos.companies.base_currency, sgpos.companies.fiscal_year_start, sgpos.companies.is_active, sgpos.companies.created_at, sgpos.companies.updated_at 
FROM sgpos.companies 
WHERE sgpos.companies.id = $1::UUID
2025-06-19 20:24:43,176 INFO sqlalchemy.engine.Engine [generated in 0.00018s] (UUID('00000000-0000-0000-0000-000000000001'),)
2025-06-19 20:24:43,179 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:24:49,565 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:24:49,568 INFO sqlalchemy.engine.Engine SELECT sgpos.users.id, sgpos.users.company_id, sgpos.users.username, sgpos.users.email, sgpos.users.password_hash, sgpos.users.full_name, sgpos.users.is_active, sgpos.users.last_login_at, sgpos.users.created_at, sgpos.users.updated_at 
FROM sgpos.users 
WHERE sgpos.users.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-19 20:24:49,568 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-19 20:24:49,576 INFO sqlalchemy.engine.Engine SELECT sgpos.user_roles.user_id AS sgpos_user_roles_user_id, sgpos.user_roles.role_id AS sgpos_user_roles_role_id, sgpos.user_roles.outlet_id AS sgpos_user_roles_outlet_id 
FROM sgpos.user_roles 
WHERE sgpos.user_roles.user_id IN ($1::UUID)
2025-06-19 20:24:49,576 INFO sqlalchemy.engine.Engine [generated in 0.00043s] (UUID('00000000-0000-0000-0000-000000000003'),)
2025-06-19 20:24:49,581 INFO sqlalchemy.engine.Engine SELECT sgpos.roles.id AS sgpos_roles_id, sgpos.roles.company_id AS sgpos_roles_company_id, sgpos.roles.name AS sgpos_roles_name, sgpos.roles.description AS sgpos_roles_description, sgpos.roles.is_system_role AS sgpos_roles_is_system_role 
FROM sgpos.roles 
WHERE sgpos.roles.id IN ($1::UUID)
2025-06-19 20:24:49,581 INFO sqlalchemy.engine.Engine [generated in 0.00037s] (UUID('de93b721-0650-446b-8efa-efb990aa0bfd'),)
2025-06-19 20:24:49,585 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:24:53,620 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:24:53,620 INFO sqlalchemy.engine.Engine SELECT sgpos.users.id, sgpos.users.company_id, sgpos.users.username, sgpos.users.email, sgpos.users.password_hash, sgpos.users.full_name, sgpos.users.is_active, sgpos.users.last_login_at, sgpos.users.created_at, sgpos.users.updated_at 
FROM sgpos.users 
WHERE sgpos.users.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-19 20:24:53,620 INFO sqlalchemy.engine.Engine [cached since 4.053s ago] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-19 20:24:53,625 INFO sqlalchemy.engine.Engine SELECT sgpos.user_roles.user_id AS sgpos_user_roles_user_id, sgpos.user_roles.role_id AS sgpos_user_roles_role_id, sgpos.user_roles.outlet_id AS sgpos_user_roles_outlet_id 
FROM sgpos.user_roles 
WHERE sgpos.user_roles.user_id IN ($1::UUID)
2025-06-19 20:24:53,625 INFO sqlalchemy.engine.Engine [cached since 4.05s ago] (UUID('00000000-0000-0000-0000-000000000003'),)
2025-06-19 20:24:53,629 INFO sqlalchemy.engine.Engine SELECT sgpos.roles.id AS sgpos_roles_id, sgpos.roles.company_id AS sgpos_roles_company_id, sgpos.roles.name AS sgpos_roles_name, sgpos.roles.description AS sgpos_roles_description, sgpos.roles.is_system_role AS sgpos_roles_is_system_role 
FROM sgpos.roles 
WHERE sgpos.roles.id IN ($1::UUID)
2025-06-19 20:24:53,629 INFO sqlalchemy.engine.Engine [cached since 4.048s ago] (UUID('de93b721-0650-446b-8efa-efb990aa0bfd'),)
2025-06-19 20:24:53,631 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:24:56,331 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:24:56,331 INFO sqlalchemy.engine.Engine SELECT sgpos.companies.id, sgpos.companies.name, sgpos.companies.registration_number, sgpos.companies.gst_registration_number, sgpos.companies.address, sgpos.companies.phone, sgpos.companies.email, sgpos.companies.base_currency, sgpos.companies.fiscal_year_start, sgpos.companies.is_active, sgpos.companies.created_at, sgpos.companies.updated_at 
FROM sgpos.companies 
WHERE sgpos.companies.id = $1::UUID
2025-06-19 20:24:56,331 INFO sqlalchemy.engine.Engine [cached since 13.16s ago] (UUID('00000000-0000-0000-0000-000000000001'),)
2025-06-19 20:24:56,336 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:02,582 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:02,589 INFO sqlalchemy.engine.Engine SELECT CAST(sgpos.sales_transactions.transaction_date AS DATE) AS period, sum(sgpos.sales_transactions.total_amount) AS total_sales, count(sgpos.sales_transactions.id) AS transaction_count, sum(sgpos.sales_transactions.discount_amount) AS total_discount_amount, sum(sgpos.sales_transactions.tax_amount) AS total_tax_collected 
FROM sgpos.sales_transactions 
WHERE sgpos.sales_transactions.company_id = $1::UUID AND sgpos.sales_transactions.transaction_date >= $2::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.transaction_date <= $3::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.status = $4::VARCHAR GROUP BY period ORDER BY period
2025-06-19 20:25:02,589 INFO sqlalchemy.engine.Engine [generated in 0.00033s] (UUID('00000000-0000-0000-0000-000000000001'), datetime.datetime(2025, 5, 1, 0, 0), datetime.datetime(2025, 6, 19, 23, 59, 59, 999999), 'COMPLETED')
2025-06-19 20:25:02,598 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:02,600 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:02,604 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.sku, sgpos.products.name, sum(sgpos.sales_transaction_items.quantity) AS quantity_sold, sum(sgpos.sales_transaction_items.line_total) AS total_revenue, sum(sgpos.sales_transaction_items.quantity * sgpos.sales_transaction_items.cost_price) AS total_cost 
FROM sgpos.products JOIN sgpos.sales_transaction_items ON sgpos.sales_transaction_items.product_id = sgpos.products.id JOIN sgpos.sales_transactions ON sgpos.sales_transaction_items.sales_transaction_id = sgpos.sales_transactions.id 
WHERE sgpos.sales_transactions.company_id = $1::UUID AND sgpos.sales_transactions.transaction_date >= $2::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.transaction_date <= $3::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.status = $4::VARCHAR GROUP BY sgpos.products.id ORDER BY total_revenue DESC 
 LIMIT $5::INTEGER
2025-06-19 20:25:02,604 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (UUID('00000000-0000-0000-0000-000000000001'), datetime.datetime(2025, 5, 1, 0, 0), datetime.datetime(2025, 6, 19, 23, 59, 59, 999999), 'COMPLETED', 10)
2025-06-19 20:25:02,623 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:18,732 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:18,735 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID ORDER BY sgpos.products.name 
 LIMIT $4::INTEGER OFFSET $5::INTEGER
2025-06-19 20:25:18,735 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-19 20:25:18,743 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:21,366 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:21,374 INFO sqlalchemy.engine.Engine SELECT sgpos.purchase_orders.id, sgpos.purchase_orders.company_id, sgpos.purchase_orders.outlet_id, sgpos.purchase_orders.supplier_id, sgpos.purchase_orders.po_number, sgpos.purchase_orders.order_date, sgpos.purchase_orders.expected_delivery_date, sgpos.purchase_orders.status, sgpos.purchase_orders.notes, sgpos.purchase_orders.total_amount, sgpos.purchase_orders.created_at, sgpos.purchase_orders.updated_at, suppliers_1.id AS id_1, suppliers_1.company_id AS company_id_1, suppliers_1.name, suppliers_1.contact_person, suppliers_1.email, suppliers_1.phone, suppliers_1.address, suppliers_1.is_active, suppliers_1.created_at AS created_at_1, suppliers_1.updated_at AS updated_at_1 
FROM sgpos.purchase_orders LEFT OUTER JOIN sgpos.suppliers AS suppliers_1 ON suppliers_1.id = sgpos.purchase_orders.supplier_id 
WHERE sgpos.purchase_orders.company_id = $1::UUID AND sgpos.purchase_orders.outlet_id = $2::UUID ORDER BY sgpos.purchase_orders.order_date DESC 
 LIMIT $3::INTEGER OFFSET $4::INTEGER
2025-06-19 20:25:21,374 INFO sqlalchemy.engine.Engine [generated in 0.00033s] (UUID('00000000-0000-0000-0000-000000000001'), UUID('00000000-0000-0000-0000-000000000002'), 100, 0)
2025-06-19 20:25:21,383 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:23,076 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:23,077 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID ORDER BY sgpos.products.name 
 LIMIT $4::INTEGER OFFSET $5::INTEGER
2025-06-19 20:25:23,077 INFO sqlalchemy.engine.Engine [cached since 4.342s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-19 20:25:23,080 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:30,212 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:30,214 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-19 20:25:30,214 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-19 20:25:30,217 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:33,188 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:33,189 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-19 20:25:33,190 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-19 20:25:33,196 INFO sqlalchemy.engine.Engine COMMIT
2025-06-19 20:25:38,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-19 20:25:38,280 INFO sqlalchemy.engine.Engine SELECT coalesce(sum(sgpos.sales_transactions.total_amount), $1::NUMERIC) AS sales, coalesce(count(sgpos.sales_transactions.id), $2::INTEGER) AS transactions 
FROM sgpos.sales_transactions 
WHERE sgpos.sales_transactions.company_id = $3::UUID AND sgpos.sales_transactions.transaction_date >= $4::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.transaction_date < $5::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.status = $6::VARCHAR
2025-06-19 20:25:38,280 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (Decimal('0.0'), 0, UUID('00000000-0000-0000-0000-000000000001'), datetime.datetime(2025, 6, 19, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 6, 20, 0, 0, tzinfo=datetime.timezone.utc), 'COMPLETED')
2025-06-19 20:25:38,285 INFO sqlalchemy.engine.Engine SELECT coalesce(count(sgpos.customers.id), $1::INTEGER) AS coalesce_1 
FROM sgpos.customers 
WHERE sgpos.customers.company_id = $2::UUID AND sgpos.customers.created_at >= $3::TIMESTAMP WITH TIME ZONE
2025-06-19 20:25:38,285 INFO sqlalchemy.engine.Engine [generated in 0.00018s] (0, UUID('00000000-0000-0000-0000-000000000001'), datetime.datetime(2025, 6, 1, 0, 0, tzinfo=datetime.timezone.utc))
2025-06-19 20:25:38,338 INFO sqlalchemy.engine.Engine SELECT coalesce(count(sgpos.products.id), $1::INTEGER) AS coalesce_1 
FROM sgpos.products JOIN sgpos.inventory ON sgpos.products.id = sgpos.inventory.product_id 
WHERE sgpos.products.company_id = $2::UUID AND sgpos.products.track_inventory = true AND sgpos.inventory.quantity_on_hand <= sgpos.products.reorder_point
2025-06-19 20:25:38,338 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (0, UUID('00000000-0000-0000-0000-000000000001'))
2025-06-19 20:25:38,342 INFO sqlalchemy.engine.Engine COMMIT
Shutting down core resources...
Shutdown complete.

