$ python3 app/main.py 
2025-06-20 13:13:06,348 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-06-20 13:13:06,349 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-06-20 13:13:06,352 INFO sqlalchemy.engine.Engine select current_schema()
2025-06-20 13:13:06,352 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-06-20 13:13:06,353 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-06-20 13:13:06,353 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-06-20 13:13:06,354 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:06,354 INFO sqlalchemy.engine.Engine SELECT 1
2025-06-20 13:13:06,355 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ()
2025-06-20 13:13:06,355 INFO sqlalchemy.engine.Engine ROLLBACK
2025-06-20 13:13:14,716 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:14,826 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.company_id = $1::UUID AND sgpos.customers.is_active = true AND (sgpos.customers.customer_code ILIKE $2::VARCHAR OR sgpos.customers.name ILIKE $3::VARCHAR OR sgpos.customers.email ILIKE $4::VARCHAR OR sgpos.customers.phone ILIKE $5::VARCHAR) 
 LIMIT $6::INTEGER OFFSET $7::INTEGER
2025-06-20 13:13:14,827 INFO sqlalchemy.engine.Engine [generated in 0.00026s] (UUID('00000000-0000-0000-0000-000000000001'), '%4001%', '%4001%', '%4001%', '%4001%', 1, 0)
2025-06-20 13:13:14,832 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:13:22,070 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:22,073 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID AND sgpos.products.is_active = true AND (sgpos.products.sku ILIKE $2::VARCHAR OR sgpos.products.name ILIKE $3::VARCHAR OR sgpos.products.barcode ILIKE $4::VARCHAR) 
 LIMIT $5::INTEGER OFFSET $6::INTEGER
2025-06-20 13:13:22,073 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (UUID('00000000-0000-0000-0000-000000000001'), '%102345678%', '%102345678%', '%102345678%', 1, 0)
2025-06-20 13:13:22,076 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:13:29,452 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:29,453 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID AND sgpos.products.is_active = true AND (sgpos.products.sku ILIKE $2::VARCHAR OR sgpos.products.name ILIKE $3::VARCHAR OR sgpos.products.barcode ILIKE $4::VARCHAR) 
 LIMIT $5::INTEGER OFFSET $6::INTEGER
2025-06-20 13:13:29,453 INFO sqlalchemy.engine.Engine [cached since 7.38s ago] (UUID('00000000-0000-0000-0000-000000000001'), '%1023456789%', '%1023456789%', '%1023456789%', 1, 0)
2025-06-20 13:13:29,454 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:13:37,684 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:37,685 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID AND sgpos.products.is_active = true AND (sgpos.products.sku ILIKE $2::VARCHAR OR sgpos.products.name ILIKE $3::VARCHAR OR sgpos.products.barcode ILIKE $4::VARCHAR) 
 LIMIT $5::INTEGER OFFSET $6::INTEGER
2025-06-20 13:13:37,685 INFO sqlalchemy.engine.Engine [cached since 15.61s ago] (UUID('00000000-0000-0000-0000-000000000001'), '%10234567%', '%10234567%', '%10234567%', 1, 0)
2025-06-20 13:13:37,686 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:13:45,053 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:45,054 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID AND sgpos.products.is_active = true AND (sgpos.products.sku ILIKE $2::VARCHAR OR sgpos.products.name ILIKE $3::VARCHAR OR sgpos.products.barcode ILIKE $4::VARCHAR) 
 LIMIT $5::INTEGER OFFSET $6::INTEGER
2025-06-20 13:13:45,054 INFO sqlalchemy.engine.Engine [cached since 22.98s ago] (UUID('00000000-0000-0000-0000-000000000001'), '%23456789%', '%23456789%', '%23456789%', 1, 0)
2025-06-20 13:13:45,057 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:13:47,245 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:47,248 INFO sqlalchemy.engine.Engine SELECT sgpos.payment_methods.id, sgpos.payment_methods.company_id, sgpos.payment_methods.name, sgpos.payment_methods.type, sgpos.payment_methods.is_active, sgpos.payment_methods.created_at, sgpos.payment_methods.updated_at 
FROM sgpos.payment_methods 
WHERE sgpos.payment_methods.company_id = $1::UUID AND sgpos.payment_methods.is_active = true ORDER BY sgpos.payment_methods.name
2025-06-20 13:13:47,248 INFO sqlalchemy.engine.Engine [generated in 0.00026s] (UUID('00000000-0000-0000-0000-000000000001'),)
2025-06-20 13:13:47,256 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:13:50,641 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:50,642 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.id IN ($1::UUID, $2::UUID)
2025-06-20 13:13:50,642 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (UUID('a65138e1-ba83-414f-9c66-b5f775484ea5'), UUID('d31e9589-2067-4c1f-a410-739eb6bfb289'))
2025-06-20 13:13:50,645 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:13:50,651 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:13:50,652 INFO sqlalchemy.engine.Engine SELECT sgpos.inventory.id, sgpos.inventory.outlet_id, sgpos.inventory.product_id, sgpos.inventory.variant_id, sgpos.inventory.quantity_on_hand, sgpos.inventory.created_at, sgpos.inventory.updated_at 
FROM sgpos.inventory 
WHERE sgpos.inventory.outlet_id = $1::UUID AND sgpos.inventory.product_id = $2::UUID AND sgpos.inventory.variant_id IS NULL FOR UPDATE
2025-06-20 13:13:50,653 INFO sqlalchemy.engine.Engine [generated in 0.00029s] (UUID('00000000-0000-0000-0000-000000000002'), UUID('a65138e1-ba83-414f-9c66-b5f775484ea5'))
2025-06-20 13:13:50,659 INFO sqlalchemy.engine.Engine UPDATE sgpos.inventory SET quantity_on_hand=$1::NUMERIC(15, 4), updated_at=now() WHERE sgpos.inventory.id = $2::UUID
2025-06-20 13:13:50,659 INFO sqlalchemy.engine.Engine [generated in 0.00022s] (Decimal('7.0000'), UUID('5fd3307f-240d-4c81-82f2-423a5756b1d6'))
2025-06-20 13:13:50,663 INFO sqlalchemy.engine.Engine INSERT INTO sgpos.stock_movements (id, company_id, outlet_id, product_id, variant_id, movement_type, quantity_change, reference_id, reference_type, notes, created_by_user_id, created_at) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::VARCHAR, $7::NUMERIC(15, 4), $8::UUID, $9::VARCHAR, $10::VARCHAR, $11::UUID, $12::TIMESTAMP WITH TIME ZONE)
2025-06-20 13:13:50,663 INFO sqlalchemy.engine.Engine [generated in 0.00028s] (UUID('54c4bef3-4e1e-4212-9df4-36704ab9aeeb'), UUID('00000000-0000-0000-0000-000000000001'), UUID('00000000-0000-0000-0000-000000000002'), UUID('a65138e1-ba83-414f-9c66-b5f775484ea5'), None, 'SALE', Decimal('-1'), None, 'SALES_TRANSACTION', None, UUID('00000000-0000-0000-0000-000000000003'), datetime.datetime(2025, 6, 20, 5, 13, 50, 663816))
2025-06-20 13:13:50,671 INFO sqlalchemy.engine.Engine SELECT sgpos.inventory.id, sgpos.inventory.outlet_id, sgpos.inventory.product_id, sgpos.inventory.variant_id, sgpos.inventory.quantity_on_hand, sgpos.inventory.created_at, sgpos.inventory.updated_at 
FROM sgpos.inventory 
WHERE sgpos.inventory.outlet_id = $1::UUID AND sgpos.inventory.product_id = $2::UUID AND sgpos.inventory.variant_id IS NULL FOR UPDATE
2025-06-20 13:13:50,672 INFO sqlalchemy.engine.Engine [cached since 0.01919s ago] (UUID('00000000-0000-0000-0000-000000000002'), UUID('d31e9589-2067-4c1f-a410-739eb6bfb289'))
2025-06-20 13:13:50,673 INFO sqlalchemy.engine.Engine UPDATE sgpos.inventory SET quantity_on_hand=$1::NUMERIC(15, 4), updated_at=now() WHERE sgpos.inventory.id = $2::UUID
2025-06-20 13:13:50,673 INFO sqlalchemy.engine.Engine [cached since 0.01437s ago] (Decimal('7.0000'), UUID('b35d4982-a723-438b-8091-61521b4a3b8a'))
2025-06-20 13:13:50,675 INFO sqlalchemy.engine.Engine INSERT INTO sgpos.stock_movements (id, company_id, outlet_id, product_id, variant_id, movement_type, quantity_change, reference_id, reference_type, notes, created_by_user_id, created_at) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::VARCHAR, $7::NUMERIC(15, 4), $8::UUID, $9::VARCHAR, $10::VARCHAR, $11::UUID, $12::TIMESTAMP WITH TIME ZONE)
2025-06-20 13:13:50,675 INFO sqlalchemy.engine.Engine [cached since 0.01144s ago] (UUID('43aae230-4ec9-4714-be34-799309d45412'), UUID('00000000-0000-0000-0000-000000000001'), UUID('00000000-0000-0000-0000-000000000002'), UUID('d31e9589-2067-4c1f-a410-739eb6bfb289'), None, 'SALE', Decimal('-1'), None, 'SALES_TRANSACTION', None, UUID('00000000-0000-0000-0000-000000000003'), datetime.datetime(2025, 6, 20, 5, 13, 50, 675014))
2025-06-20 13:13:50,679 INFO sqlalchemy.engine.Engine INSERT INTO sgpos.sales_transactions (id, company_id, outlet_id, transaction_number, transaction_date, customer_id, cashier_id, subtotal, tax_amount, discount_amount, rounding_adjustment, total_amount, status, notes) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::VARCHAR, $5::TIMESTAMP WITH TIME ZONE, $6::UUID, $7::UUID, $8::NUMERIC(19, 2), $9::NUMERIC(19, 2), $10::NUMERIC(19, 2), $11::NUMERIC(19, 2), $12::NUMERIC(19, 2), $13::VARCHAR, $14::VARCHAR) RETURNING sgpos.sales_transactions.created_at, sgpos.sales_transactions.updated_at
2025-06-20 13:13:50,679 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (UUID('c42ee882-bc8f-4c21-9a2b-4d478dcd9aab'), UUID('00000000-0000-0000-0000-000000000001'), UUID('00000000-0000-0000-0000-000000000002'), 'SALE-454433E8', datetime.datetime(2025, 6, 20, 5, 13, 50, 679780), UUID('9dc1329f-2cd7-40cd-afdb-f810ffeff956'), UUID('00000000-0000-0000-0000-000000000003'), Decimal('18.00'), Decimal('1.62'), 0, 0, Decimal('19.62'), 'COMPLETED', None)
2025-06-20 13:13:50,685 INFO sqlalchemy.engine.Engine INSERT INTO sgpos.payments (id, sales_transaction_id, payment_method_id, amount, reference_number, created_at) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::NUMERIC(19, 2), $5::VARCHAR, $6::TIMESTAMP WITH TIME ZONE)
2025-06-20 13:13:50,685 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (UUID('2646a106-2051-46ee-a241-d95ebaa92882'), UUID('c42ee882-bc8f-4c21-9a2b-4d478dcd9aab'), UUID('47a54a16-7b43-46c6-bbdf-c2ba4b28bb56'), Decimal('19.62'), None, datetime.datetime(2025, 6, 20, 5, 13, 50, 685677))
2025-06-20 13:13:50,690 INFO sqlalchemy.engine.Engine INSERT INTO sgpos.sales_transaction_items (id, sales_transaction_id, product_id, variant_id, quantity, unit_price, cost_price, line_total) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::NUMERIC(15, 4), $6::NUMERIC(19, 4), $7::NUMERIC(19, 4), $8::NUMERIC(19, 2)), ($9::UUID, $10::UUID, $11::UUID, $12::UUID, $13::NUMERIC(15, 4), $14::NUMERIC(19, 4), $15::NUMERIC(19, 4), $16::NUMERIC(19, 2))
2025-06-20 13:13:50,690 INFO sqlalchemy.engine.Engine [generated in 0.00015s (insertmanyvalues) 1/1 (unordered)] (UUID('70d437f9-acc8-48b2-9577-f00ac23e9ffd'), UUID('c42ee882-bc8f-4c21-9a2b-4d478dcd9aab'), UUID('a65138e1-ba83-414f-9c66-b5f775484ea5'), None, Decimal('1'), Decimal('6.0000'), Decimal('4.5000'), Decimal('6.00'), UUID('de9de1bb-a09b-493c-b48d-3c2dd1ed1974'), UUID('c42ee882-bc8f-4c21-9a2b-4d478dcd9aab'), UUID('d31e9589-2067-4c1f-a410-739eb6bfb289'), None, Decimal('1'), Decimal('12.0000'), Decimal('11.0000'), Decimal('12.00'))
2025-06-20 13:13:50,695 INFO sqlalchemy.engine.Engine SELECT sgpos.sales_transactions.id, sgpos.sales_transactions.company_id, sgpos.sales_transactions.outlet_id, sgpos.sales_transactions.transaction_number, sgpos.sales_transactions.transaction_date, sgpos.sales_transactions.customer_id, sgpos.sales_transactions.cashier_id, sgpos.sales_transactions.subtotal, sgpos.sales_transactions.tax_amount, sgpos.sales_transactions.discount_amount, sgpos.sales_transactions.rounding_adjustment, sgpos.sales_transactions.total_amount, sgpos.sales_transactions.status, sgpos.sales_transactions.notes, sgpos.sales_transactions.created_at, sgpos.sales_transactions.updated_at 
FROM sgpos.sales_transactions 
WHERE sgpos.sales_transactions.id = $1::UUID
2025-06-20 13:13:50,696 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (UUID('c42ee882-bc8f-4c21-9a2b-4d478dcd9aab'),)
2025-06-20 13:13:50,701 INFO sqlalchemy.engine.Engine SELECT sgpos.sales_transaction_items.id AS sgpos_sales_transaction_items_id, sgpos.sales_transaction_items.sales_transaction_id AS sgpos_sales_transaction_items_sales_transaction_id, sgpos.sales_transaction_items.product_id AS sgpos_sales_transaction_items_product_id, sgpos.sales_transaction_items.variant_id AS sgpos_sales_transaction_items_variant_id, sgpos.sales_transaction_items.quantity AS sgpos_sales_transaction_items_quantity, sgpos.sales_transaction_items.unit_price AS sgpos_sales_transaction_items_unit_price, sgpos.sales_transaction_items.cost_price AS sgpos_sales_transaction_items_cost_price, sgpos.sales_transaction_items.line_total AS sgpos_sales_transaction_items_line_total 
FROM sgpos.sales_transaction_items 
WHERE $1::UUID = sgpos.sales_transaction_items.sales_transaction_id
2025-06-20 13:13:50,701 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (UUID('c42ee882-bc8f-4c21-9a2b-4d478dcd9aab'),)
2025-06-20 13:13:50,701 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:14:48,124 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:14:48,128 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID ORDER BY sgpos.products.name 
 LIMIT $4::INTEGER OFFSET $5::INTEGER
2025-06-20 13:14:48,128 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:14:48,134 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:14:54,953 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:14:54,959 INFO sqlalchemy.engine.Engine SELECT sgpos.stock_movements.id, sgpos.stock_movements.product_id, sgpos.stock_movements.variant_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.outlets.name AS outlet_name, sgpos.stock_movements.movement_type, sgpos.stock_movements.quantity_change, sgpos.stock_movements.reference_id, sgpos.stock_movements.notes, sgpos.users.full_name AS created_by_user_name, sgpos.stock_movements.created_at 
FROM sgpos.stock_movements JOIN sgpos.products ON sgpos.stock_movements.product_id = sgpos.products.id JOIN sgpos.outlets ON sgpos.stock_movements.outlet_id = sgpos.outlets.id LEFT OUTER JOIN sgpos.users ON sgpos.stock_movements.created_by_user_id = sgpos.users.id 
WHERE sgpos.stock_movements.company_id = $1::UUID AND sgpos.stock_movements.product_id = $2::UUID ORDER BY sgpos.stock_movements.created_at DESC
2025-06-20 13:14:54,959 INFO sqlalchemy.engine.Engine [generated in 0.00034s] (UUID('00000000-0000-0000-0000-000000000001'), UUID('b483285f-803c-448d-9b4a-74d8e6ac2014'))
2025-06-20 13:14:54,965 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:14:59,682 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:14:59,692 INFO sqlalchemy.engine.Engine SELECT sgpos.purchase_orders.id, sgpos.purchase_orders.company_id, sgpos.purchase_orders.outlet_id, sgpos.purchase_orders.supplier_id, sgpos.purchase_orders.po_number, sgpos.purchase_orders.order_date, sgpos.purchase_orders.expected_delivery_date, sgpos.purchase_orders.status, sgpos.purchase_orders.notes, sgpos.purchase_orders.total_amount, sgpos.purchase_orders.created_at, sgpos.purchase_orders.updated_at, suppliers_1.id AS id_1, suppliers_1.company_id AS company_id_1, suppliers_1.name, suppliers_1.contact_person, suppliers_1.email, suppliers_1.phone, suppliers_1.address, suppliers_1.is_active, suppliers_1.created_at AS created_at_1, suppliers_1.updated_at AS updated_at_1 
FROM sgpos.purchase_orders LEFT OUTER JOIN sgpos.suppliers AS suppliers_1 ON suppliers_1.id = sgpos.purchase_orders.supplier_id 
WHERE sgpos.purchase_orders.company_id = $1::UUID AND sgpos.purchase_orders.outlet_id = $2::UUID ORDER BY sgpos.purchase_orders.order_date DESC 
 LIMIT $3::INTEGER OFFSET $4::INTEGER
2025-06-20 13:14:59,693 INFO sqlalchemy.engine.Engine [generated in 0.00034s] (UUID('00000000-0000-0000-0000-000000000001'), UUID('00000000-0000-0000-0000-000000000002'), 100, 0)
2025-06-20 13:14:59,699 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:00,968 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:00,970 INFO sqlalchemy.engine.Engine SELECT sgpos.suppliers.id, sgpos.suppliers.company_id, sgpos.suppliers.name, sgpos.suppliers.contact_person, sgpos.suppliers.email, sgpos.suppliers.phone, sgpos.suppliers.address, sgpos.suppliers.is_active, sgpos.suppliers.created_at, sgpos.suppliers.updated_at 
FROM sgpos.suppliers 
WHERE sgpos.suppliers.company_id = $1::UUID AND sgpos.suppliers.is_active = true ORDER BY sgpos.suppliers.name
2025-06-20 13:15:00,970 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (UUID('00000000-0000-0000-0000-000000000001'),)
2025-06-20 13:15:00,974 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:04,018 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:04,019 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID ORDER BY sgpos.products.name 
 LIMIT $4::INTEGER OFFSET $5::INTEGER
2025-06-20 13:15:04,019 INFO sqlalchemy.engine.Engine [cached since 15.89s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:15:04,023 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:17,174 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:17,178 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID AND (sgpos.products.sku ILIKE $4::VARCHAR OR sgpos.products.name ILIKE $5::VARCHAR) ORDER BY sgpos.products.name 
 LIMIT $6::INTEGER OFFSET $7::INTEGER
2025-06-20 13:15:17,178 INFO sqlalchemy.engine.Engine [generated in 0.00036s] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), '%12%', '%12%', 100, 0)
2025-06-20 13:15:17,182 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:17,520 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:17,521 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID AND (sgpos.products.sku ILIKE $4::VARCHAR OR sgpos.products.name ILIKE $5::VARCHAR) ORDER BY sgpos.products.name 
 LIMIT $6::INTEGER OFFSET $7::INTEGER
2025-06-20 13:15:17,521 INFO sqlalchemy.engine.Engine [cached since 0.3438s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), '%123%', '%123%', 100, 0)
2025-06-20 13:15:17,524 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:17,878 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:17,878 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID AND (sgpos.products.sku ILIKE $4::VARCHAR OR sgpos.products.name ILIKE $5::VARCHAR) ORDER BY sgpos.products.name 
 LIMIT $6::INTEGER OFFSET $7::INTEGER
2025-06-20 13:15:17,879 INFO sqlalchemy.engine.Engine [cached since 0.7013s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), '%1234%', '%1234%', 100, 0)
2025-06-20 13:15:17,882 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:18,616 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:18,617 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID AND (sgpos.products.sku ILIKE $4::VARCHAR OR sgpos.products.name ILIKE $5::VARCHAR) ORDER BY sgpos.products.name 
 LIMIT $6::INTEGER OFFSET $7::INTEGER
2025-06-20 13:15:18,617 INFO sqlalchemy.engine.Engine [cached since 1.44s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), '%123456%', '%123456%', 100, 0)
2025-06-20 13:15:18,620 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:19,320 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:19,321 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID AND (sgpos.products.sku ILIKE $4::VARCHAR OR sgpos.products.name ILIKE $5::VARCHAR) ORDER BY sgpos.products.name 
 LIMIT $6::INTEGER OFFSET $7::INTEGER
2025-06-20 13:15:19,321 INFO sqlalchemy.engine.Engine [cached since 2.144s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), '%12345679%', '%12345679%', 100, 0)
2025-06-20 13:15:19,324 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:43,009 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:43,009 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID AND sgpos.products.is_active = true AND (sgpos.products.sku ILIKE $2::VARCHAR OR sgpos.products.name ILIKE $3::VARCHAR OR sgpos.products.barcode ILIKE $4::VARCHAR) 
 LIMIT $5::INTEGER OFFSET $6::INTEGER
2025-06-20 13:15:43,009 INFO sqlalchemy.engine.Engine [cached since 140.9s ago] (UUID('00000000-0000-0000-0000-000000000001'), '%12345679%', '%12345679%', '%12345679%', 1, 0)
2025-06-20 13:15:43,011 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:15:43,012 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:15:43,013 INFO sqlalchemy.engine.Engine SELECT sgpos.inventory.quantity_on_hand 
FROM sgpos.inventory 
WHERE sgpos.inventory.outlet_id = $1::UUID AND sgpos.inventory.product_id = $2::UUID AND sgpos.inventory.variant_id IS NULL
2025-06-20 13:15:43,013 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (UUID('00000000-0000-0000-0000-000000000002'), UUID('af483fe2-e312-4a72-b0e9-6a9f7572be16'))
2025-06-20 13:15:43,015 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:15,098 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:15,099 INFO sqlalchemy.engine.Engine SELECT sgpos.inventory.quantity_on_hand 
FROM sgpos.inventory 
WHERE sgpos.inventory.outlet_id = $1::UUID AND sgpos.inventory.product_id = $2::UUID AND sgpos.inventory.variant_id IS NULL
2025-06-20 13:16:15,099 INFO sqlalchemy.engine.Engine [cached since 32.09s ago] (UUID('00000000-0000-0000-0000-000000000002'), UUID('af483fe2-e312-4a72-b0e9-6a9f7572be16'))
2025-06-20 13:16:15,100 INFO sqlalchemy.engine.Engine ROLLBACK
2025-06-20 13:16:15,102 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:15,102 INFO sqlalchemy.engine.Engine SELECT sgpos.inventory.id, sgpos.inventory.outlet_id, sgpos.inventory.product_id, sgpos.inventory.variant_id, sgpos.inventory.quantity_on_hand, sgpos.inventory.created_at, sgpos.inventory.updated_at 
FROM sgpos.inventory 
WHERE sgpos.inventory.outlet_id = $1::UUID AND sgpos.inventory.product_id = $2::UUID AND sgpos.inventory.variant_id IS NULL FOR UPDATE
2025-06-20 13:16:15,102 INFO sqlalchemy.engine.Engine [cached since 144.4s ago] (UUID('00000000-0000-0000-0000-000000000002'), UUID('af483fe2-e312-4a72-b0e9-6a9f7572be16'))
2025-06-20 13:16:15,104 INFO sqlalchemy.engine.Engine INSERT INTO sgpos.inventory (id, outlet_id, product_id, variant_id, quantity_on_hand) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::NUMERIC(15, 4)) RETURNING sgpos.inventory.created_at, sgpos.inventory.updated_at
2025-06-20 13:16:15,104 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (UUID('65a48de1-4d7e-45f1-bb42-702ffdbf066d'), UUID('00000000-0000-0000-0000-000000000002'), UUID('af483fe2-e312-4a72-b0e9-6a9f7572be16'), None, Decimal('8'))
2025-06-20 13:16:15,107 INFO sqlalchemy.engine.Engine INSERT INTO sgpos.stock_movements (id, company_id, outlet_id, product_id, variant_id, movement_type, quantity_change, reference_id, reference_type, notes, created_by_user_id, created_at) VALUES ($1::UUID, $2::UUID, $3::UUID, $4::UUID, $5::UUID, $6::VARCHAR, $7::NUMERIC(15, 4), $8::UUID, $9::VARCHAR, $10::VARCHAR, $11::UUID, $12::TIMESTAMP WITH TIME ZONE)
2025-06-20 13:16:15,107 INFO sqlalchemy.engine.Engine [cached since 144.4s ago] (UUID('24909ef7-d056-45ad-b85a-1e82fcb98e59'), UUID('00000000-0000-0000-0000-000000000001'), UUID('00000000-0000-0000-0000-000000000002'), UUID('af483fe2-e312-4a72-b0e9-6a9f7572be16'), None, 'ADJUSTMENT_IN', Decimal('8'), None, 'STOCK_ADJUSTMENT', 'new order', UUID('00000000-0000-0000-0000-000000000003'), datetime.datetime(2025, 6, 20, 5, 16, 15, 106995))
2025-06-20 13:16:15,109 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:16,253 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:16,254 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID ORDER BY sgpos.products.name 
 LIMIT $4::INTEGER OFFSET $5::INTEGER
2025-06-20 13:16:16,254 INFO sqlalchemy.engine.Engine [cached since 88.13s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:16:16,257 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:24,968 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:24,969 INFO sqlalchemy.engine.Engine SELECT sgpos.stock_movements.id, sgpos.stock_movements.product_id, sgpos.stock_movements.variant_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.outlets.name AS outlet_name, sgpos.stock_movements.movement_type, sgpos.stock_movements.quantity_change, sgpos.stock_movements.reference_id, sgpos.stock_movements.notes, sgpos.users.full_name AS created_by_user_name, sgpos.stock_movements.created_at 
FROM sgpos.stock_movements JOIN sgpos.products ON sgpos.stock_movements.product_id = sgpos.products.id JOIN sgpos.outlets ON sgpos.stock_movements.outlet_id = sgpos.outlets.id LEFT OUTER JOIN sgpos.users ON sgpos.stock_movements.created_by_user_id = sgpos.users.id 
WHERE sgpos.stock_movements.company_id = $1::UUID AND sgpos.stock_movements.product_id = $2::UUID ORDER BY sgpos.stock_movements.created_at DESC
2025-06-20 13:16:24,969 INFO sqlalchemy.engine.Engine [cached since 90.01s ago] (UUID('00000000-0000-0000-0000-000000000001'), UUID('af483fe2-e312-4a72-b0e9-6a9f7572be16'))
2025-06-20 13:16:24,972 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:31,635 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:31,635 INFO sqlalchemy.engine.Engine SELECT sgpos.purchase_orders.id, sgpos.purchase_orders.company_id, sgpos.purchase_orders.outlet_id, sgpos.purchase_orders.supplier_id, sgpos.purchase_orders.po_number, sgpos.purchase_orders.order_date, sgpos.purchase_orders.expected_delivery_date, sgpos.purchase_orders.status, sgpos.purchase_orders.notes, sgpos.purchase_orders.total_amount, sgpos.purchase_orders.created_at, sgpos.purchase_orders.updated_at, suppliers_1.id AS id_1, suppliers_1.company_id AS company_id_1, suppliers_1.name, suppliers_1.contact_person, suppliers_1.email, suppliers_1.phone, suppliers_1.address, suppliers_1.is_active, suppliers_1.created_at AS created_at_1, suppliers_1.updated_at AS updated_at_1 
FROM sgpos.purchase_orders LEFT OUTER JOIN sgpos.suppliers AS suppliers_1 ON suppliers_1.id = sgpos.purchase_orders.supplier_id 
WHERE sgpos.purchase_orders.company_id = $1::UUID AND sgpos.purchase_orders.outlet_id = $2::UUID ORDER BY sgpos.purchase_orders.order_date DESC 
 LIMIT $3::INTEGER OFFSET $4::INTEGER
2025-06-20 13:16:31,636 INFO sqlalchemy.engine.Engine [cached since 91.94s ago] (UUID('00000000-0000-0000-0000-000000000001'), UUID('00000000-0000-0000-0000-000000000002'), 100, 0)
2025-06-20 13:16:31,639 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:32,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:32,253 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id AS product_id, sgpos.products.name AS product_name, sgpos.products.sku, sgpos.products.barcode, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.cost_price, sgpos.products.selling_price, coalesce(sgpos.inventory.quantity_on_hand, $1::NUMERIC) AS quantity_on_hand, (SELECT name FROM sgpos.categories WHERE id = products.category_id) AS category_name 
FROM sgpos.products LEFT OUTER JOIN sgpos.inventory ON sgpos.inventory.product_id = sgpos.products.id AND sgpos.inventory.outlet_id = $2::UUID 
WHERE sgpos.products.company_id = $3::UUID ORDER BY sgpos.products.name 
 LIMIT $4::INTEGER OFFSET $5::INTEGER
2025-06-20 13:16:32,253 INFO sqlalchemy.engine.Engine [cached since 104.1s ago] (Decimal('0.0'), UUID('00000000-0000-0000-0000-000000000002'), UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:16:32,257 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:37,697 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:37,699 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-20 13:16:37,699 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:16:37,703 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:53,819 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:53,820 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.id = $1::UUID
2025-06-20 13:16:53,820 INFO sqlalchemy.engine.Engine [generated in 0.00015s] (UUID('a872a5ad-b25b-4400-b3ae-7ff80bf99ccb'),)
2025-06-20 13:16:53,822 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:53,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:53,825 INFO sqlalchemy.engine.Engine UPDATE sgpos.products SET selling_price=$1::NUMERIC(19, 4), updated_at=now() WHERE sgpos.products.id = $2::UUID
2025-06-20 13:16:53,825 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (Decimal('4.5'), UUID('a872a5ad-b25b-4400-b3ae-7ff80bf99ccb'))
2025-06-20 13:16:53,831 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.id = $1::UUID
2025-06-20 13:16:53,831 INFO sqlalchemy.engine.Engine [generated in 0.00025s] (UUID('a872a5ad-b25b-4400-b3ae-7ff80bf99ccb'),)
2025-06-20 13:16:53,832 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:55,086 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:55,086 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-20 13:16:55,086 INFO sqlalchemy.engine.Engine [cached since 17.39s ago] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:16:55,088 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:58,427 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:58,427 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.id = $1::UUID
2025-06-20 13:16:58,427 INFO sqlalchemy.engine.Engine [cached since 4.607s ago] (UUID('a872a5ad-b25b-4400-b3ae-7ff80bf99ccb'),)
2025-06-20 13:16:58,429 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:16:58,430 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:16:58,431 INFO sqlalchemy.engine.Engine UPDATE sgpos.products SET is_active=$1::BOOLEAN, updated_at=now() WHERE sgpos.products.id = $2::UUID
2025-06-20 13:16:58,431 INFO sqlalchemy.engine.Engine [generated in 0.00028s] (True, UUID('a872a5ad-b25b-4400-b3ae-7ff80bf99ccb'))
2025-06-20 13:16:58,434 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.id = $1::UUID
2025-06-20 13:16:58,434 INFO sqlalchemy.engine.Engine [cached since 4.604s ago] (UUID('a872a5ad-b25b-4400-b3ae-7ff80bf99ccb'),)
2025-06-20 13:16:58,435 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:00,455 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:00,455 INFO sqlalchemy.engine.Engine SELECT sgpos.products.id, sgpos.products.company_id, sgpos.products.category_id, sgpos.products.supplier_id, sgpos.products.sku, sgpos.products.barcode, sgpos.products.name, sgpos.products.description, sgpos.products.cost_price, sgpos.products.selling_price, sgpos.products.gst_rate, sgpos.products.track_inventory, sgpos.products.reorder_point, sgpos.products.is_active, sgpos.products.created_at, sgpos.products.updated_at 
FROM sgpos.products 
WHERE sgpos.products.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-20 13:17:00,455 INFO sqlalchemy.engine.Engine [cached since 22.76s ago] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:17:00,457 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:08,955 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:08,957 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-20 13:17:08,957 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:17:08,959 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:16,404 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:16,406 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.id = $1::UUID
2025-06-20 13:17:16,406 INFO sqlalchemy.engine.Engine [generated in 0.00023s] (UUID('c903a80a-a77a-43d8-bd08-8f82f3c65d13'),)
2025-06-20 13:17:16,408 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:16,409 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:16,409 INFO sqlalchemy.engine.Engine UPDATE sgpos.customers SET is_active=$1::BOOLEAN, updated_at=now() WHERE sgpos.customers.id = $2::UUID
2025-06-20 13:17:16,409 INFO sqlalchemy.engine.Engine [generated in 0.00017s] (False, UUID('c903a80a-a77a-43d8-bd08-8f82f3c65d13'))
2025-06-20 13:17:16,412 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.id = $1::UUID
2025-06-20 13:17:16,412 INFO sqlalchemy.engine.Engine [generated in 0.00013s] (UUID('c903a80a-a77a-43d8-bd08-8f82f3c65d13'),)
2025-06-20 13:17:16,413 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:17,629 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:17,630 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-20 13:17:17,630 INFO sqlalchemy.engine.Engine [cached since 8.673s ago] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:17:17,632 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:26,116 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:26,116 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.id = $1::UUID
2025-06-20 13:17:26,116 INFO sqlalchemy.engine.Engine [cached since 9.711s ago] (UUID('afbb36e2-780b-43f0-83eb-973951b3d3af'),)
2025-06-20 13:17:26,118 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:26,119 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:26,120 INFO sqlalchemy.engine.Engine UPDATE sgpos.customers SET phone=$1::VARCHAR, updated_at=now() WHERE sgpos.customers.id = $2::UUID
2025-06-20 13:17:26,120 INFO sqlalchemy.engine.Engine [generated in 0.00024s] ('5654654', UUID('afbb36e2-780b-43f0-83eb-973951b3d3af'))
2025-06-20 13:17:26,123 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.id = $1::UUID
2025-06-20 13:17:26,123 INFO sqlalchemy.engine.Engine [cached since 9.711s ago] (UUID('afbb36e2-780b-43f0-83eb-973951b3d3af'),)
2025-06-20 13:17:26,124 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:27,957 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:27,957 INFO sqlalchemy.engine.Engine SELECT sgpos.customers.id, sgpos.customers.company_id, sgpos.customers.customer_code, sgpos.customers.name, sgpos.customers.email, sgpos.customers.phone, sgpos.customers.address, sgpos.customers.loyalty_points, sgpos.customers.credit_limit, sgpos.customers.is_active, sgpos.customers.created_at, sgpos.customers.updated_at 
FROM sgpos.customers 
WHERE sgpos.customers.company_id = $1::UUID 
 LIMIT $2::INTEGER OFFSET $3::INTEGER
2025-06-20 13:17:27,958 INFO sqlalchemy.engine.Engine [cached since 19s ago] (UUID('00000000-0000-0000-0000-000000000001'), 100, 0)
2025-06-20 13:17:27,961 INFO sqlalchemy.engine.Engine COMMIT
2025-06-20 13:17:34,911 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-20 13:17:34,914 INFO sqlalchemy.engine.Engine SELECT coalesce(sum(sgpos.sales_transactions.total_amount), $1::NUMERIC) AS sales, coalesce(count(sgpos.sales_transactions.id), $2::INTEGER) AS transactions 
FROM sgpos.sales_transactions 
WHERE sgpos.sales_transactions.company_id = $3::UUID AND sgpos.sales_transactions.transaction_date >= $4::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.transaction_date < $5::TIMESTAMP WITH TIME ZONE AND sgpos.sales_transactions.status = $6::VARCHAR
2025-06-20 13:17:34,914 INFO sqlalchemy.engine.Engine [generated in 0.00022s] (Decimal('0.0'), 0, UUID('00000000-0000-0000-0000-000000000001'), datetime.datetime(2025, 6, 20, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 6, 21, 0, 0, tzinfo=datetime.timezone.utc), 'COMPLETED')
2025-06-20 13:17:34,920 INFO sqlalchemy.engine.Engine SELECT coalesce(count(sgpos.customers.id), $1::INTEGER) AS coalesce_1 
FROM sgpos.customers 
WHERE sgpos.customers.company_id = $2::UUID AND sgpos.customers.created_at >= $3::TIMESTAMP WITH TIME ZONE
2025-06-20 13:17:34,920 INFO sqlalchemy.engine.Engine [generated in 0.00030s] (0, UUID('00000000-0000-0000-0000-000000000001'), datetime.datetime(2025, 6, 1, 0, 0, tzinfo=datetime.timezone.utc))
2025-06-20 13:17:34,923 INFO sqlalchemy.engine.Engine SELECT coalesce(count(sgpos.products.id), $1::INTEGER) AS coalesce_1 
FROM sgpos.products JOIN sgpos.inventory ON sgpos.products.id = sgpos.inventory.product_id 
WHERE sgpos.products.company_id = $2::UUID AND sgpos.products.track_inventory = true AND sgpos.inventory.quantity_on_hand <= sgpos.products.reorder_point
2025-06-20 13:17:34,923 INFO sqlalchemy.engine.Engine [generated in 0.00031s] (0, UUID('00000000-0000-0000-0000-000000000001'))
2025-06-20 13:17:34,927 INFO sqlalchemy.engine.Engine COMMIT
Shutting down core resources...
Shutdown complete.

